C51 COMPILER V9.60.0.0   CMT2300A_HAL                                                      03/16/2022 17:38:03 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE CMT2300A_HAL
OBJECT MODULE PLACED IN .\STX0031_KeilC51\cmt2300a_hal.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE radio\cmt2300a_hal.c OPTIMIZE(0,SPEED) BROWSE INCDIR(.\user\inc;.\includ
                    -e;.\radio) DEBUG OBJECTEXTEND PRINT(.\STX0031_KeilC51\cmt2300a_hal.lst) TABS(2) OBJECT(.\STX0031_KeilC51\cmt2300a_hal.ob
                    -j)

line level    source

   1          /*
   2           * THE FOLLOWING FIRMWARE IS PROVIDED: (1) "AS IS" WITH NO WARRANTY; AND
   3           * (2)TO ENABLE ACCESS TO CODING INFORMATION TO GUIDE AND FACILITATE CUSTOMER.
   4           * CONSEQUENTLY, CMOSTEK SHALL NOT BE HELD LIABLE FOR ANY DIRECT, INDIRECT OR
   5           * CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE CONTENT
   6           * OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING INFORMATION
   7           * CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
   8           *
   9           * Copyright (C) CMOSTEK SZ.
  10           */
  11          
  12          /*!
  13           * @file    cmt2300a_hal.c
  14           * @brief   CMT2300A hardware abstraction layer
  15           *
  16           * @version 1.2
  17           * @date    Jul 17 2017
  18           * @author  CMOSTEK R@D
  19           */
  20          
  21          /*抽象硬件层源代码，实现 CMT2300A 寄存器， FIFO， GPIO 访问接口。
  22          */
  23          
  24          #include "cmt2300a_hal.h"
  25          
  26          
  27          /*! ********************************************************
  28          * @name    CMT2300A_InitGpio
  29          * @desc    Initializes the CMT2300A interface GPIOs.
  30          * *********************************************************/
  31          void CMT2300A_InitGpio(void)
  32          {
  33   1        /*gpio cfg*/
  34   1        CMT2300A_SetGpio1In();
  35   1          CMT2300A_SetGpio2In();
  36   1          CMT2300A_SetGpio3In();
  37   1        
  38   1          cmt_spi3_init();
  39   1      }
  40          
  41          /*! ********************************************************
  42          * @name    CMT2300A_ReadReg
  43          * @desc    Read the CMT2300A register at the specified address.
  44          * @param   addr: register address
  45          * @return  Register value
  46          * *********************************************************/
  47          u8 CMT2300A_ReadReg(u8 addr)
  48          {
  49   1          xdata u8 dat = 0xFF;
  50   1          Cmt_Spi_Read(addr, &dat);
  51   1      
  52   1          return dat;
  53   1      }
C51 COMPILER V9.60.0.0   CMT2300A_HAL                                                      03/16/2022 17:38:03 PAGE 2   

  54          
  55          /*! ********************************************************
  56          * @name    CMT2300A_WriteReg
  57          * @desc    Write the CMT2300A register at the specified address.
  58          * @param   addr: register address
  59          *          dat: register value
  60          * *********************************************************/
  61          void CMT2300A_WriteReg(u8 addr, u8 dat)
  62          {
  63   1          Cmt_Spi_Write(addr, dat);
  64   1      }
  65          
  66          /*! ********************************************************
  67          * @name    CMT2300A_ReadFifo
  68          * @desc    Reads the contents of the CMT2300A FIFO.
  69          * @param   buf: buffer where to copy the FIFO read data
  70          *          len: number of bytes to be read from the FIFO
  71          * *********************************************************/
  72          void CMT2300A_ReadFifo(u8 buf[], u16 len)
  73          {
  74   1          Cmt_Spi_Read_Fifo(buf, len);
  75   1      }
  76          
  77          /*! ********************************************************
  78          * @name    CMT2300A_WriteFifo
  79          * @desc    Writes the buffer contents to the CMT2300A FIFO.
  80          * @param   buf: buffer containing data to be put on the FIFO
  81          *          len: number of bytes to be written to the FIFO
  82          * *********************************************************/
  83          void CMT2300A_WriteFifo(const u8 buf[], u16 len)
  84          {
  85   1          Cmt_Spi_Write_Fifo(buf, len);
  86   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    149    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      1    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     13    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
